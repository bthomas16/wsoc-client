{"remainingRequest":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/babel-loader/lib/index.js!/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/src/components/Auth/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/src/components/Auth/Register.vue","mtime":1550974111507},{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/cache-loader/dist/cjs.js","mtime":1548990847448},{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/babel-loader/lib/index.js","mtime":1548990846981},{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/cache-loader/dist/cjs.js","mtime":1548990847448},{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/vue-loader/lib/index.js","mtime":1548990850526},{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/cache-loader/dist/cjs.js","mtime":1548990847448},{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/babel-loader/lib/index.js","mtime":1548990846981},{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/cache-loader/dist/cjs.js","mtime":1548990847448},{"path":"/Users/brentthomas/Desktop/Developer/Sandbox/JS/CRUD/VUE/WatchCollection/client/node_modules/vue-loader/lib/index.js","mtime":1548990850526}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'register',\n  data: function data() {\n    return {\n      ROOT_API: process.env.VUE_APP_ROOT_API,\n      form: {\n        email: '',\n        firstName: '',\n        lastName: '',\n        password: ''\n      },\n      card: 1,\n      showAlert: false,\n      responseMessage: '',\n      responseStyle: 'light',\n      isRefreshPage: false,\n      showForm: true,\n      passwordErrMsg: '',\n      formValid: true\n    };\n  },\n  methods: {\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      this.showAlert = false;\n      this.form.email.toLowerCase();\n      this.$emit('toggleAuthLoading', true);\n      this.$store.dispatch('register', this.form).then(function (res) {\n        if (res.isSuccess) {\n          // PWA SHIT\n          if (_this.$store.state.DelayPrompt) {\n            _this.$store.state.DelayPrompt.prompt();\n\n            _this.$store.state.DelayPrompt.userChoice.then(function (selection) {\n              if (selection.outcome === 'accepted') {\n                _this.$ga.event({\n                  eventCategory: 'PWA Banner Prompt',\n                  eventAction: 'Accept Banner'\n                });\n              } else {\n                _this.$ga.event({\n                  eventCategory: 'PWA Banner Prompt',\n                  eventAction: 'Decline Banner'\n                });\n              }\n            });\n          }\n\n          _this.$emit('toggleAuthLoading', false);\n\n          _this.$store.dispatch('sendWelcomeEmail', _this.form);\n\n          _this.$router.push({\n            path: '/profile'\n          });\n        } else {\n          _this.$emit('toggleAuthLoading', false);\n\n          _this.showAlert = true;\n          _this.responseMessage = res.message;\n          _this.responseStyle = 'danger';\n          _this.isRefreshPage = res.isRefreshPage;\n\n          _this.$emit('ToggleShowingAlert', true);\n        }\n      }).catch(function (err) {\n        _this.showAlert = true;\n        _this.responseMessage = err.message;\n        _this.responseStyle = 'danger';\n\n        _this.$emit('ToggleShowingAlert', true);\n      });\n    },\n    toggleAuthChild: function toggleAuthChild() {\n      this.$emit('ToggleShowingAlert', false);\n      this.$emit('toggleAuthView');\n    },\n    validateEmail: function validateEmail(email) {\n      // regex expression making sure email is in valid format\n      var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n      if (re.test(email)) {\n        return true;\n      } else {\n        this.form.password = '';\n        return re.test(email);\n      }\n    },\n    validatePassword: function validatePassword(password) {\n      if (password.length < 4) {\n        this.passwordErrMsg = 'Password must be at least 4 characters';\n        return false;\n      } else {\n        this.passwordErrMsg = '';\n        return true;\n      }\n    },\n    validateNames: function validateNames(first, last) {\n      if (first.length && last.length) return true;else return false;\n    },\n    reloadPage: function reloadPage() {\n      location.reload();\n    } // isDuplicateEmail(email)\n    // {\n    //     console.log('should check', email)\n    //     axios.get('/api/user/isDuplicateEmail?email=' + email).then(res => {\n    //         console.log(res)\n    //     })\n    // }\n\n  }\n};",{"version":3,"sources":["Register.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <b-container fluid>\n        <b-row no-gutters>\n            <b-col cols=\"11\" class=\"mx-auto\">\n                <b-alert show v-bind:variant=\"responseStyle\" v-if=\"showAlert\" class=\"py-1 py-md-0 my-1\">{{responseMessage}} <em v-if=\"isRefreshPage\" @click=\"reloadPage\"> - Try Again</em></b-alert>\n                <b-form @submit.prevent=\"onSubmit\">\n                    <b-form-group id=\"email\"\n                        v-if=\"card == 1\"\n                        label=\"Email:\"\n                        label-for=\"Email\"\n                        class=\"mt-md-2\"\n                        description=\"We'll never share your email with anyone.\">\n                        <b-form-input id=\"email\"\n                                    type=\"email\"\n                                    v-model=\"form.email\"\n                                    required\n                                    autocomplete=\"off\"\n                                    pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\"\n                                    placeholder=\"Start with an email\"\n                                    @input=\"validateEmail(form.email)\"\n                                    >\n                        </b-form-input>\n                    </b-form-group>\n                    <b-form-group id=\"password\"\n                        v-if=\"card == 1\"\n                        label=\"Password:\"\n                        label-for=\"password\"\n                        class=\"mt-md-3\">\n                        <b-form-input id=\"password\"\n                                    type=\"password\"\n                                    v-model=\"form.password\"\n                                    required\n                                    autocomplete=\"off\"\n                                    placeholder=\"Create a password\"\n                                    @input=\"validatePassword(form.password)\">\n                        </b-form-input>\n                    </b-form-group>\n                    <b-form-group id=\"names\"\n                        v-if=\"card == 2\"\n                        label=\"First Name:\"\n                        label-for=\"First Name\"\n                        class=\"mt-md-2\"\n                        description=\"First Name\">\n                        <b-form-input id=\"firstName\"\n                                    type=\"text\"\n                                    v-model=\"form.firstName\"\n                                    required\n                                    autocomplete=\"off\"\n                                    \n                                    placeholder=\"First Name\">\n                        </b-form-input>\n                    </b-form-group>\n                    <b-form-group id=\"credentials\"\n                        v-if=\"card == 2\"\n                        label=\"Last Name:\"\n                        label-for=\"lastName\"\n                        class=\"mt-md-3\">\n                        <b-form-input id=\"password\"\n                                    type=\"text\"\n                                    v-model=\"form.lastName\"\n                                    required\n                                    autocomplete=\"off\"\n                                    placeholder=\"Last Name\"\n                                    >\n                        </b-form-input>\n                </b-form-group>\n                <h6 class=\"red thin h7\">{{passwordErrMsg}}</h6>\n                <b-row align-v=\"center\">\n                    <b-col cols=\"4\">\n                        <b-button variant=\"default\" class=\"bg-navy white\" @click=\"card=2\" :disabled=\"form.password.length < 4\" v-if=\"card == 1\">Continue</b-button>\n                        <b-button variant=\"default\" class=\"bg-navy white\" :disabled=\"!form.firstName || !form.lastName\" type=\"submit\" v-if=\"card == 2\">Finish</b-button>\n                    </b-col>\n                    <b-col cols=\"8\" class=\"right-align\">\n                        <p class=\"h8 m-1\">Already a user? <span class=\"link nowrap\" @click=\"toggleAuthChild\">Login Here</span></p>\n                    </b-col>\n                </b-row>\n            </b-form>\n        </b-col>\n        </b-row>\n\n    </b-container>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n  name: 'register',\n  data () {\n    return {\n      ROOT_API: process.env.VUE_APP_ROOT_API,\n      form: {\n        email: '',\n        firstName: '',\n        lastName: '',\n        password: ''\n      },\n      card: 1,\n      showAlert: false,\n      responseMessage: '',\n      responseStyle: 'light',\n      isRefreshPage: false,\n      showForm: true,\n      passwordErrMsg: '',\n      formValid: true\n    }\n  },\n  methods: {\n    onSubmit () {\n      this.showAlert = false\n      this.form.email.toLowerCase()\n      this.$emit('toggleAuthLoading', true)\n      this.$store.dispatch('register', this.form)\n        .then((res) => {\n          if (res.isSuccess) {\n            // PWA SHIT\n            if (this.$store.state.DelayPrompt) {\n                this.$store.state.DelayPrompt.prompt()\n    \n                this.$store.state.DelayPrompt.userChoice.then(selection => {\n                if (selection.outcome === 'accepted') {\n                    this.$ga.event({\n                        eventCategory: 'PWA Banner Prompt',\n                        eventAction: 'Accept Banner',\n                    })\n                } else {\n                    this.$ga.event({\n                        eventCategory: 'PWA Banner Prompt',\n                        eventAction: 'Decline Banner',\n                    })\n                }\n              })\n            }\n\n            this.$emit('toggleAuthLoading', false)\n            this.$store.dispatch('sendWelcomeEmail', this.form)\n            this.$router.push({ path: '/profile' })\n          } else {\n            this.$emit('toggleAuthLoading', false)\n            this.showAlert = true\n            this.responseMessage = res.message\n            this.responseStyle = 'danger'\n            this.isRefreshPage = res.isRefreshPage\n            this.$emit('ToggleShowingAlert', true)          \n            \n          }\n        }).catch(err => {\n          this.showAlert = true\n          this.responseMessage = err.message\n          this.responseStyle = 'danger'\n          this.$emit('ToggleShowingAlert', true)          \n          \n        })\n    },\n\n    toggleAuthChild () {\n      this.$emit('ToggleShowingAlert', false)  \n      this.$emit('toggleAuthView')\n    },\n\n    validateEmail (email) {\n      // regex expression making sure email is in valid format\n      var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      if (re.test(email)) {\n        return true\n      } else {\n        this.form.password = ''\n        return re.test(email)\n      }\n    },\n\n    validatePassword (password) {\n      if (password.length < 4) {\n        this.passwordErrMsg = 'Password must be at least 4 characters'\n        return false\n      } else {\n        this.passwordErrMsg = ''\n        return true\n      }\n    },\n\n    validateNames (first, last) {\n      if (first.length && last.length) return true\n      else return false\n    },\n\n    reloadPage () {\n      location.reload()\n    }\n\n    // isDuplicateEmail(email)\n    // {\n    //     console.log('should check', email)\n    //     axios.get('/api/user/isDuplicateEmail?email=' + email).then(res => {\n    //         console.log(res)\n    //     })\n    // }\n  }\n}\n</script>\n\n<style scoped>\n/* .form-control:focus {\n    border: none;\n    outline: none !important;\n}\n\n    #register-wrapper {\n        padding:auto;\n    }\n\n    .card {\n        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    } */\n    input {\n        border: none;\n        border-bottom: 1px solid gray;\n        outline: none;\n        border-radius: 0;\n    }\n</style>\n"],"sourceRoot":"src/components/Auth"}]}